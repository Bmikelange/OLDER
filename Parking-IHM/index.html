<html>
<head>
	<meta charset="utf-8" />
	<title>IHM park</title>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="/maps/documentation/javascript/demos/demos.css">
	<style>

		#map {
			height: 70%;
		}
		html, body {
			height: 100%;
			margin: 0;
			padding: 0;
		}
	</style>
</head>
<body>
<header>
</header>
<nav class="navbar navbar-expand-lg navbar-light bg-light logo-img">
	<a class="navbar-brand" href="#"><img src="img/logo.png" width="100%" height="100%"></a>

	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse" id="navbarSupportedContent">
		<ul class="navbar-nav mr-auto">
			<li class="nav-item">
				<a class="nav-link home" href="#">Home</a>
			</li>
			<li class="nav-item">
				<a class="nav-link park btn btn-primary" data-toggle="collapse"  role="button" aria-expanded="false" aria-controls="collapseExample">Parkings</a>
			</li>
		</ul>
	</div>
</nav>

<div class="collapse" id="collapse1">
	<div class="form-add first-form" style="width:800px; margin:0 auto;">
		<label><h3>Modification du parking sélectionné</h3></label>
		<div class="form-group">
			<label for="input">Nom</label>
			<input type="text" class="form-control" id="input">
		</div>
		<div class="form-group">
			<label for="input1">Type de véhicules</label>
			<input type="text" class="form-control" id="input1">
		</div>
		<div class="form-group">
			<label for="input"2>Nombre de places</label>
			<input type="text" class="form-control" id="input2">
		</div>
		<div class="form-group">
			<label for="input3">Coordonnées GPS</label>
			<input type="text" class="form-control" id="input3">
		</div>
		<div class="form-group">
			<label for="exampleInputEmail1">Email</label>
			<input type="email" class="form-control" id="exampleInputEmail1" data-error="Bruh, that email address is invalid" required>
		</div>
		<div class="form-group">
			<label for="input4">Systeme de comptage</label>
			<input type="text" class="form-control" id="input4">
		</div>
		<button id='validate' onclick='valide()' class='btn btn-primary btn-sm' data-toggle='collapse' href='#collapse1'>Modifier parking</button>
	</div>
</div>
<div class="main">
	<div class = "body_content">
		<div class = " col-md-4 col-sm-12 col-xs-12">
			<div class = "description">
				<h2>Parking La Doua</h2>
				<p>Bienvenue sur votre gestionnaire de parkings du campus universitaire de La Doua. </p>
				<p>ici vous pourrez voir la liste des parkings de la doua et en ajouter si il en manque</p>
			</div>
			<div class="form-content form-add">
			<form id="needs-validation" novalidate><label><h3>Creation d'un nouveau parking</h3></label>
			<div class="form-group">
				<label for="example-text-input" class="col-2 col-form-label">Nom de parking</label>
				<div>
					<input class="form-control name-input"  autocomplete="on" type="text" value="Artisanal kale" id="example-text-input" required>
				</div>
			</div>
			<div class = "form-group">
				<label for="example-text-input" class="col-2 col-form-label">Type de véhicules</label>
				<div>
					<select autocomplete="on"  class="custom-select mb-2 mr-sm-2 mb-sm-0" id="inlineFormCustomSelect" required>
						<option selected>Choose...</option>
						<option value="1">One</option>
						<option value="2">Two</option>
					</select>
				</div>
			</div>
			<div class="form-group">
				<label for="example-text-input" class="col-2 col-form-label">Addressse</label>
				<div>
					<input type="text" autocomplete="on" class="form-control" id="inputAddress" placeholder="1234 Main St" required>
				</div>
			</div>
			<div class="form-group">
				<label for="example-text-input" class="col-2 col-form-label">Coordonnées GPS</label>
				<div>
					<input class="form-control" autocomplete="on" type="number" value="Artisanal kale" id="example-nr-input" required>
				</div>
			</div>
			<div class="form-group">
				<label for="example-email-input" class="col-2 col-form-label">Email</label>
				<div>
					<input class="form-control" autocomplete="on" type="email" value="bootstrap@example.com" id="example-email-input" required>
				</div>
			</div>
			<div class="form-group">
				<label for="example-text-input" class="col-2 col-form-label">Système de comptage</label>
				<div>
					<input class="form-control" autocomplete="on" type="number" value="Artisanal kale" id="idtext" required>
				</div>
			</div>
			<div class="form-group">
				<div>
					<button type="button" onclick="addFunction()" class="btn btn-success submit">Ajouter parking</button>
				</div>
			</div>
		</form>
		</div>
		</div>
		<div id="map" style=" float: right" class="col-md-7 map-display"></div>
	</div>
</div>
<div class="container">
  <div class="span4 pull-center">
    <div class="alert alert-success fade">
      <strong>Felicitation!</strong> votre parking a ete ajoute..
    </div>
  </div>
</div>
<div class="container">
  <div class="span4 pull-center">
    <div class="alert alert-danger">
      <strong>Alert!</strong> Formulaire incomplet..
    </div>
  </div>
</div>

<script>
    alert("ce script ne fonctionne que sur mozilla firefox");

    function supprimer(test){
			var txt;
	 		var r = confirm("Vous etes sur de vouloir supprimer ?");
	 		if (r == true) {
			 txt = "You pressed OK!";
			 document.getElementById("table1").deleteRow(test.parentNode.parentNode.rowIndex);
			 } else {
					 txt = "You pressed Cancel!";
			 }
    }

    var donnee;
    function modifier(test){
        document.getElementById("exampleInputEmail1").value = test.parentNode.parentNode.childNodes[4].innerHTML;
        document.getElementById("input").value = test.parentNode.parentNode.childNodes[0].innerHTML;
        document.getElementById("input1").value = test.parentNode.parentNode.childNodes[1].innerHTML;
        document.getElementById("input2").value = test.parentNode.parentNode.childNodes[2].innerHTML;
        document.getElementById("input3").value = test.parentNode.parentNode.childNodes[3].innerHTML;
        document.getElementById("input4").value = test.parentNode.parentNode.childNodes[5].innerHTML;
        donnee = test;
    }

    function valide()
    {
        donnee.parentNode.parentNode.childNodes[0].innerHTML=document.getElementById("input").value;
        donnee.parentNode.parentNode.childNodes[1].innerHTML=document.getElementById("input1").value;
        donnee.parentNode.parentNode.childNodes[2].innerHTML=document.getElementById("input2").value;
        donnee.parentNode.parentNode.childNodes[3].innerHTML=document.getElementById("input3").value;
        donnee.parentNode.parentNode.childNodes[4].innerHTML=document.getElementById("exampleInputEmail1").value;
        donnee.parentNode.parentNode.childNodes[5].innerHTML=document.getElementById("input4").value;
    }

    var myArray=[];
    for(var i=0;i<11;i++)
    {
        myArray[i]=new Array(7);
    }
    myArray[0][0]="Nom";
    myArray[0][1]="Type de véhicules";
    myArray[0][2]="Nombre de places";
    myArray[0][3]="Coordonnées GPS";
    myArray[0][4]="Email responsable";
    myArray[0][5]="Systeme de comptage";
		myArray[0][6]="Options";
    myArray[1][0]="nautibus";
    myArray[1][1]="voiture";
    myArray[1][2]="2";
    myArray[1][3]="00 00";
    myArray[1][4]="my-email@etu.univ-lyon1.fr";
    myArray[1][5]="???";
    myArray[2][0]="nautibus";
    myArray[2][1]="velo";
    myArray[2][2]="3";
    myArray[2][3]="00 00";
    myArray[2][4]="my-email@etu.univ-lyon1.fr";
    myArray[2][5]="???";
    myArray[3][0]="atree";
    myArray[3][1]="voiture";
    myArray[3][2]="6";
    myArray[3][3]="00 00";
    myArray[3][4]="my-email@etu.univ-lyon1.fr";
    myArray[3][5]="???";
    myArray[4][0]="astree";
    myArray[4][1]="velo";
    myArray[4][2]="8";
    myArray[4][3]="00 00";
    myArray[4][4]="my-email@etu.univ-lyon1.fr";
    myArray[4][5]="???";
    myArray[5][0]="deambulatoire";
    myArray[5][1]="voiture";
    myArray[5][2]="9";
    myArray[5][3]="00 00";
    myArray[5][4]="my-email@etu.univ-lyon1.fr";
    myArray[5][5]="???";
    myArray[6][0]="deambulatoire";
    myArray[6][1]="velo";
    myArray[6][2]="10";
    myArray[6][3]="00 00";
    myArray[6][4]="my-email@etu.univ-lyon1.fr";
    myArray[6][5]="???";
    myArray[7][0]="insa";
    myArray[7][1]="voiture";
    myArray[7][2]="1";
    myArray[7][3]="00 00";
    myArray[7][4]="my-email@etu.univ-lyon1.fr";
    myArray[7][5]="???";
    myArray[8][0]="insa";
    myArray[8][1]="velo";
    myArray[8][2]="5";
    myArray[8][3]="00 00";
    myArray[8][4]="my-email@etu.univ-lyon1.fr";
    myArray[8][5]="???";
    myArray[9][0]="polytech";
    myArray[9][1]="voiture";
    myArray[9][2]="6";
    myArray[9][3]="00 00";
    myArray[9][4]="my-email@etu.univ-lyon1.fr";
    myArray[9][5]="???";
    myArray[10][0]="polytech";
    myArray[10][1]="velo";
    myArray[10][2]="1";
    myArray[10][3]="00 00";
    myArray[10][4]="my-email@etu.univ-lyon1.fr";
    myArray[10][5]="???";
    document.write('<div class="collapse col-md-12 col-xs-12 col-sm-12" id="collapseExample" ><table class="table table-striped table-bordered table-hover" id="table1">')
		document.write('<div class="col-sm-8 title-table"><h2>Parkings déjà <b>renseignés</b></h2></div>')
    document.write('<div class="col-sm-4 search-box form-group pull-right"><i class="fa fa-search"></i><input type="text" class="form-control" id="myInput" onkeyup="myFunction()" placeholder="Search for names.."></div>')
    var line =  '<tr id = "tableau">';
    var i = 0;
    for(var n=0;n<7;n++)
    {
        document.write("<th scope=\"row\">"+myArray[0][n]+"</th>")
    }
    for(var i=1;i<myArray.length;i++)
    {
        document.write("<tr>");
        for(var j=0;j<6;j++)
        {
            document.write("<td>"+myArray[i][j]+"</td>");
        }
        document.write('<td style="white-space: nowrap"><a id="modify" class = "edit_img" onclick="modifier(this)" data-toggle="collapse" href="#collapse1"><img src="img/edit.png" class="table-icon"></a>');
        document.write("<a id='delete' onclick='supprimer(this)'><img src='img/trash.png' class='table-icon'></a></td>");
        document.write("</tr>");
    }
    document.write("</table></div>");

    function myFunction() {
        var input, filter, table, tr, td, i;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("table1");
        tr = table.getElementsByTagName("tr");
        for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[0];
            if (td) {
                if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }
    function addFunction() {
        var table = document.getElementById("table1");
        var row= document.createElement("tr");
        var td1 = document.createElement("td");
        var td2 = document.createElement("td");
        var td3 = document.createElement("td");
        var td4 = document.createElement("td");
        var td5 = document.createElement("td");
        var td6 = document.createElement("td");
        var td7 = document.createElement("td");

        i++;
        length++;
        console.log(length);
        myArray[i] ={};
        myArray[i][0] = document.getElementById("example-text-input").value;
				myArray[i][1] = document.getElementById("inlineFormCustomSelect").value;
				myArray[i][2] =  document.getElementById("inputAddress").value;
				myArray[i][3] = document.getElementById("example-nr-input").value;
				myArray[i][4] = document.getElementById("example-email-input").value;
				if (myArray[i][0] == "" || myArray[i][1] == "" || myArray[i][2] == "" || myArray[i][3] == "" || myArray[i][4] == "")
				{

				$(".alert-danger").removeClass("in").show();
				$(".alert-danger").delay(200).addClass("in").fadeOut(2000);

				}
				else{
					$(".alert-success").removeClass("in").show();
					$(".alert-success").delay(200).addClass("in").fadeOut(2000);
        td1.innerHTML = document.getElementById("example-text-input").value;
        td2.innerHTML  = document.getElementById("inlineFormCustomSelect").value;
        td3.innerHTML  = document.getElementById("inputAddress").value;
        td4.innerHTML = document.getElementById("example-nr-input").value;


        td5.innerHTML  = document.getElementById("example-email-input").value;
        td6.innerHTML  = document.getElementById("idtext").value;
        td7.innerHTML = '<a id="modify" class = "edit_img" onclick="modifier(this)" data-toggle="collapse" href="#collapse1"><img src="img/edit.png" class="table-icon"></a><a id="delete" onclick="supprimer(this)"><img src="img/trash.png" class="table-icon"></a>'

        row.appendChild(td1);
        row.appendChild(td2);
        row.appendChild(td3);
        row.appendChild(td4);
        row.appendChild(td5);
        row.appendChild(td6);
        row.appendChild(td7);

        table.children[0].appendChild(row);
			}
    }

</script>
<script>
    var map, infoWindow;
    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: -34.397, lng: 150.644},
            zoom: 6
        });
        infoWindow = new google.maps.InfoWindow;
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var pos = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };

                infoWindow.setPosition(pos);
                infoWindow.setContent('Location found.');
                infoWindow.open(map);
                map.setCenter(pos);
            }, function() {
                handleLocationError(true, infoWindow, map.getCenter());
            });
        } else {
            handleLocationError(false, infoWindow, map.getCenter());
        }
    }

    function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
            'Error: The Geolocation service failed.' :
            'Error: Your browser doesn\'t support geolocation.');
        infoWindow.open(map);
    }
</script>
<script async defer
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBFMiuy3B5OBwwIDDLR6o7iD5kufLHlrs0
&callback=initMap">
</script>
<script>
$(function() {
  $('.nav-link').click(function() {
    $('.description').css('display', 'none !important');
  });
});
</script>
<script>
$("#collapseExample").toggleClass("hideAll");
$(".first-form").toggleClass("hideAll");

$(function() {
  $('.home').click(function() {
		$('.hideAll').hide();
    $('.main').show(0);
  });
});

$(function() {
  $('.park').click(function() {
    $('.main').hide(0);
		$('.hideAll').show();

  });
});
</script>

<footer>
	<div class="container footer">
		<div class = "row">
			<!--<div class = "col-md-6">
				<img src="img/logo_univ.png" width="50%" height="100%">
			</div>-->
			<div class="col-md-6">
				<div class="footer-paragraf">copyright © Cotorobai Anastasia 11713175 & Mikel-Ange Barros 11508726</div>
			</div>
		</div>
	</div>
</footer>
</body>
</html>
